(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{24:function(e,t,n){},32:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(26),s=n.n(c),o=(n(32),n(16)),i=n(5),u=n(3),l=n.n(u),d=n(7),j=n(6),b=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,c,s,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>2&&void 0!==o[2]?o[2]:"GET",r="".concat("https://notes-app.azurewebsites.net","/api/").concat(t),e.prev=2,"GET"!==a){e.next=10;break}return e.next=6,fetch(r);case 6:return c=e.sent,e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 10:return e.next=12,fetch(r,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 12:return s=e.sent,e.next=15,s.json();case 15:return e.abrupt("return",e.sent);case 18:return e.prev=18,e.t0=e.catch(2),e.abrupt("return",{success:!1,msg:"Error inesperado. Por favor intente nuevamente"});case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,c,s,o,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>2&&void 0!==i[2]?i[2]:"GET",r="".concat("https://notes-app.azurewebsites.net","/api/").concat(t),e.prev=2,c=localStorage.getItem("token")||"","GET"!==a){e.next=11;break}return e.next=7,fetch(r,{headers:{"x-token":c}});case 7:return s=e.sent,e.next=10,s.json();case 10:return e.abrupt("return",e.sent);case 11:return e.next=13,fetch(r,{method:a,headers:{"Content-Type":"application/json","x-token":c},body:JSON.stringify(n)});case 13:return o=e.sent,e.next=16,o.json();case 16:return e.abrupt("return",e.sent);case 19:return e.prev=19,e.t0=e.catch(2),e.abrupt("return",{success:!1,msg:"Error inesperado. Por favor intente nuevamente"});case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n){return e.apply(this,arguments)}}(),O=n(0),h=Object(a.createContext)(),m={uid:null,checking:!0,logged:!1},x=function(e){var t=e.children,n=Object(a.useState)(m),r=Object(j.a)(n,2),c=r[0],s=r[1],o=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("auth/signin",{email:t,password:n},"POST");case 2:return(a=e.sent).success&&(r=a.user.uid,localStorage.setItem("token",a.token),s({uid:r,checking:!1,logged:!0})),e.abrupt("return",{success:a.success,msg:a.msg});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("auth/signup",{email:t,password:n},"POST");case 2:return(a=e.sent).success&&(r=a.user.uid,localStorage.setItem("token",a.token),s({uid:r,checking:!1,logged:!0})),e.abrupt("return",{success:a.success,msg:a.msg});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=Object(a.useCallback)(Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=4;break}return s({uid:null,checking:!1,logged:!1}),e.abrupt("return",!1);case 4:return e.next=6,p("auth/renewToken");case 6:if(!(t=e.sent).success){e.next=12;break}return n=t.user.uid,localStorage.setItem("token",t.token),s({uid:n,checking:!1,logged:!0}),e.abrupt("return",!0);case 12:return s({uid:null,checking:!1,logged:!1}),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)}))),[]);return Object(O.jsx)(h.Provider,{value:{auth:c,signin:o,signup:i,verifyToken:u,logout:function(){localStorage.removeItem("token"),s({checking:!1,logged:!1})}},children:t})};var f=function(e){var t=e.children,n=e.stretch;return Object(O.jsx)("div",{className:"grid ".concat(n?"grid--stretch":""),children:t})},v=n(12),_=n.n(v),g=(n(24),n(13)),N=n(2),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(j.a)(t,2),r=n[0],c=n[1],s=function(){c(e)},o=function(e){var t=e.target;c(Object(N.a)(Object(N.a)({},r),{},Object(g.a)({},t.name,t.value)))};return[r,o,s]};var y=function(){var e=Object(a.useContext)(h).signin,t=E({email:"",password:""}),n=Object(j.a)(t,2),r=n[0],c=n[1],s=r.email,i=r.password,u=function(){var t=Object(d.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),s.trim()&&i.trim()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e(s,i);case 5:if(a=t.sent,r=a.success,c=a.msg,r){t.next=10;break}return t.abrupt("return",_.a.fire("Error",c||"Error al crear cuenta. Por favor intente m\xe1s tarde","error"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"auth__page",children:Object(O.jsx)("div",{className:"auth__form-wrapper",children:Object(O.jsxs)("form",{action:"/signin",method:"POST",className:"auth__form",autoComplete:"off",onSubmit:u,children:[Object(O.jsx)("h1",{className:"text-center",children:"Welcome Back"}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email address"}),Object(O.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",required:!0,value:s,onChange:c})]}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",required:!0,value:i,onChange:c})]}),Object(O.jsx)(f,{children:Object(O.jsx)("button",{type:"submit",className:"btn btn--primary mt-2 col--12",children:"Sign In"})}),Object(O.jsxs)("p",{className:"auth__bottom-text",children:["Don't have an account?",Object(O.jsx)(o.b,{to:"/signup",children:"Create one for free"})]})]})})})};var T=function(){var e=Object(a.useContext)(h).signup,t=E({email:"",password:""}),n=Object(j.a)(t,2),r=n[0],c=n[1],s=r.email,i=r.password,u=function(){var t=Object(d.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),s.trim()&&i.trim()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e(s,i);case 5:if(a=t.sent,r=a.success,c=a.msg,r){t.next=10;break}return t.abrupt("return",_.a.fire("Error",c||"Error al crear cuenta. Por favor intente m\xe1s tarde","error"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"auth__page",children:Object(O.jsx)("div",{className:"auth__form-wrapper",children:Object(O.jsxs)("form",{action:"/signup",method:"POST",className:"auth__form",autoComplete:"off",onSubmit:u,children:[Object(O.jsx)("h1",{className:"text-center",children:"Sign Up"}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email address"}),Object(O.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",required:!0,value:s,onChange:c})]}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",required:!0,value:i,onChange:c})]}),Object(O.jsx)(f,{children:Object(O.jsx)("button",{type:"submit",className:"btn btn--primary mt-2 col--12",children:"Sign Up"})}),Object(O.jsxs)("p",{className:"auth__bottom-text",children:["Already have an account?",Object(O.jsx)(o.b,{to:"/signin",children:" Sign in"})]})]})})})},S={NOTE_ADD:"Add a new note",NOTE_UPDATE:"Update a note",NOTE_COMPLETE:"Toggle the completed state of a note",NOTE_DELETE:"Delete a note",NOTE_SET_NOTES:"Set the initial notes",NOTE_SET_ACTIVE:"Set active note",NOTE_SET_COMPLETED:"Set the number of completed notes",NOTE_SET_DISPLAYED:"Set the displayed notes",NOTE_SEARCH:"Search notes",NOTE_UNSET:"Unset the notes state",UI_SET_IS_MODAL_OPEN:"Open the modal",UI_SET_CURRENT_TAB:"Set the current tab",UI_UNSET:"Unset the ui state"},C=function(e){return{type:S.NOTE_UPDATE,payload:e}},k=function(e){return{type:S.NOTE_ADD,payload:e}},w=function(e){return{type:S.NOTE_SET_NOTES,payload:e}},D=function(e){return{type:S.NOTE_SET_ACTIVE,payload:e}},A=function(){return{type:S.NOTE_SET_COMPLETED}},P=function(e){return{type:S.NOTE_SET_DISPLAYED,payload:e}},I=function(e){return{type:S.NOTE_COMPLETE,payload:e}},U=n(14),L={notes:[],displayedNotes:[],activeNote:null,completedNotes:0},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.NOTE_SET_NOTES:var n=t.payload.filter((function(e){return e.completed})),a=t.payload.filter((function(e){return!e.completed}));return Object(N.a)(Object(N.a)({},e),{},{notes:[].concat(Object(U.a)(a),Object(U.a)(n)),displayedNotes:[].concat(Object(U.a)(a),Object(U.a)(n))});case S.NOTE_ADD:return Object(N.a)(Object(N.a)({},e),{},{notes:[Object(N.a)({},t.payload)].concat(Object(U.a)(e.notes))});case S.NOTE_UPDATE:return Object(N.a)(Object(N.a)({},e),{},{notes:e.notes.map((function(e){return e._id===t.payload._id?Object(N.a)({},t.payload):e}))});case S.NOTE_COMPLETE:var r=t.payload,c=r._id,s=r.completed,o=r.updatedAt,i=e.displayedNotes.filter((function(e){return e._id!==c})),u=e.displayedNotes.find((function(e){return e._id===c}));u.updatedAt=o,u.completed=s;var l=s?[].concat(Object(U.a)(i),[u]):e.displayedNotes.filter((function(e){return e._id===c?Object(N.a)(Object(N.a)({},e),{},{updatedAt:o,completed:s}):e}));return Object(N.a)(Object(N.a)({},e),{},{displayedNotes:l});case S.NOTE_DELETE:return Object(N.a)(Object(N.a)({},e),{},{notes:e.notes.filter((function(e){return e._id!==t.payload}))});case S.NOTE_SET_ACTIVE:return Object(N.a)(Object(N.a)({},e),{},{activeNote:e.displayedNotes.find((function(e){return e._id===t.payload}))||null});case S.NOTE_SET_COMPLETED:return Object(N.a)(Object(N.a)({},e),{},{completedNotes:e.notes.filter((function(e){return e.completed})).length});case S.NOTE_SET_DISPLAYED:var d="all"===t.payload?e.notes:e.notes.filter((function(e){return e.category===t.payload})),j=d.filter((function(e){return e.completed})),b=d.filter((function(e){return!e.completed}));return Object(N.a)(Object(N.a)({},e),{},{displayedNotes:[].concat(Object(U.a)(b),Object(U.a)(j))});case S.NOTE_SEARCH:var p=t.payload,O=p.category,h=p.q;return Object(N.a)(Object(N.a)({},e),{},{displayedNotes:e.notes.filter((function(e){var t=e.title.toLowerCase().includes(h.toLowerCase()),n="all"===O||e.category===O;return t&&n}))});case S.NOTE_UNSET:return{notes:[],displayedNotes:[],activeNote:null,completedNotes:0};default:return e}},F=function(e,t){switch(t.type){case S.UI_SET_IS_MODAL_OPEN:return Object(N.a)(Object(N.a)({},e),{},{isModalOpen:t.payload});case S.UI_SET_CURRENT_TAB:return Object(N.a)(Object(N.a)({},e),{},{currentTab:t.payload});case S.UI_UNSET:return{isModalOpen:!1,currentTab:"all"};default:return e}},R={isModalOpen:!1,currentTab:"all"},B=Object(a.createContext)(),z=function(e){var t=e.children,n=Object(a.useReducer)(F,R),r=Object(j.a)(n,2),c=r[0],s=r[1];return Object(O.jsx)(B.Provider,{value:{uiState:c,uiDispatch:s},children:t})},J={notes:[],displayedNotes:[],activeNote:null,completedNotes:0},Y=Object(a.createContext)(),q=function(e){var t=e.children,n=Object(a.useReducer)(M,J),r=Object(j.a)(n,2),c=r[0],s=r[1],o=c.notes,i=Object(a.useContext)(B).uiState.currentTab;return Object(a.useEffect)((function(){s(A())}),[o]),Object(a.useEffect)((function(){s(P(i))}),[s,i]),Object(O.jsx)(Y.Provider,{value:{notesState:c,notesDispatch:s},children:t})};var H=function(e){var t=e.children;return Object(O.jsx)("div",{className:"wrapper",children:t})},G=n(41);var V=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useContext)(Y).notesDispatch,s=Object(a.useContext)(B).uiState;return Object(O.jsxs)("form",{className:"search",onSubmit:function(e){var t,a;(e.preventDefault(),n.trim())?(c((t=n.trim(),a=s.currentTab,{type:S.NOTE_SEARCH,payload:{q:t,category:a}})),r("")):c(P(s.currentTab))},children:[Object(O.jsx)("button",{type:"submit","aria-label":"Search",title:"Search",className:"search__btn",children:Object(O.jsx)(G.a,{size:20,color:"currentColor"})}),Object(O.jsx)("input",{type:"text",autoComplete:"off",className:"search__input",name:"search","aria-label":"Search notes",placeholder:"Search notes...",value:n,onChange:function(e){var t=e.target;return r(t.value)}})]})},W=n(42),K=function(e){return{type:S.UI_SET_IS_MODAL_OPEN,payload:!e}},Q=function(e){return{type:S.UI_SET_CURRENT_TAB,payload:e}};var X=function(){var e=Object(a.useContext)(B).uiDispatch,t=Object(a.useContext)(Y).notesDispatch,n=Object(a.useContext)(h).logout;return Object(O.jsx)(H,{children:Object(O.jsxs)("header",{className:"header",children:[Object(O.jsx)("div",{className:"header__top",children:Object(O.jsxs)("button",{className:"btn btn--danger",onClick:function(){e({type:S.UI_UNSET}),t({type:S.NOTE_UNSET}),n()},children:[Object(O.jsx)(W.a,{size:20,color:"currentColor"}),"Log Out"]})}),Object(O.jsx)(V,{})]})})},Z=n(43);var $=function(e){var t=e.children,n=e.type,a=e.textTransform,r=void 0===a?"none":a,c=e.onClick;return Object(O.jsx)("button",{onClick:c,className:"btn ".concat(n?"btn--".concat(n):""," text-").concat(r),children:t})},ee=["home","work","personal"];var te=function(){var e=Object(a.useContext)(B),t=e.uiState.currentTab,n=e.uiDispatch,r=function(e){var t=e.target.dataset.tab;localStorage.setItem("lastTab",t),n(Q(t))};return Object(O.jsxs)("ul",{className:"tab__list",role:"tablist",children:[Object(O.jsx)("li",{"data-tab":"all",onClick:r,className:"tab__item ".concat("all"===t?"tab__item--active":""),role:"tab",children:"All"}),ee.map((function(e){return Object(O.jsx)("li",{"data-tab":e,onClick:r,className:"tab__item tab__item--custom tab__item--custom-".concat(e," ").concat(t===e?"tab__item--active":""),role:"tab",children:e},e)}))]})};var ne=function(){var e=Object(a.useContext)(B),t=e.uiState,n=e.uiDispatch,r=t.isModalOpen;return Object(O.jsx)(H,{children:Object(O.jsxs)("nav",{className:"navbar",children:[Object(O.jsx)(te,{}),Object(O.jsxs)($,{type:"primary",textTransform:"uppercase",onClick:function(){n(K(r))},children:[Object(O.jsx)(Z.a,{size:24,color:"currentColor"}),"Add Note"]})]})})};var ae=function(e){var t=Object(a.useContext)(B),n=t.uiState,r=t.uiDispatch,c=Object(a.useContext)(Y),s=c.notesState,o=c.notesDispatch,i=n.isModalOpen,u=s.activeNote,l=e.open,d=e.children;return l&&Object(O.jsx)("div",{className:"modal__root",role:"dialog",onClick:function(e){e.target.classList.contains("modal__root")&&(r(K(i)),u&&o(D()))},children:Object(O.jsx)(H,{children:Object(O.jsx)("div",{className:"modal",children:d})})})};var re=function(e){var t=e.children,n=function(e){var t=e.xs,n=e.sm,a=e.md,r=e.lg,c=e.span,s=[];return t&&s.push("col-xs--".concat(t)),n&&s.push("col-sm--".concat(n)),a&&s.push("col-md--".concat(a)),r&&s.push("col-lg--".concat(r)),c&&s.push("col--".concat(c)),s.toString().replaceAll(","," ")}({span:e.span,xs:e.xs,sm:e.sm,md:e.md,lg:e.lg});return Object(O.jsx)("div",{className:n,children:t})},ce=n(44),se=n(45),oe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ie=function(e){var t=new Date(e),n=oe[t.getMonth()],a=t.getDate(),r=t.getFullYear();return"".concat(n," ").concat(a<10?"0"+a:a,", ").concat(r)};var ue=function(e){var t=e.label,n=e.onChange,a=e.checked;return Object(O.jsxs)("label",{className:"checkbox",children:[Object(O.jsxs)("span",{className:"checkbox__input",children:[Object(O.jsx)("input",{type:"checkbox",name:"checkbox",checked:a,onChange:n}),Object(O.jsx)("span",{className:"checkbox__control",children:Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:Object(O.jsx)("path",{fill:"none",stroke:"currentColor",strokeWidth:"3",d:"M1.73 12.91l6.37 6.37L22.79 4.59"})})})]}),t&&Object(O.jsx)("span",{className:"radio__label",children:t})]})};var le=function(e){var t=e.setPopupShowing,n=Object(a.useContext)(Y),r=n.notesState,c=n.notesDispatch,s=Object(a.useContext)(B).uiState,o=r.activeNote,i=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("notes/"+o._id,{},"DELETE");case 2:if((t=e.sent).success){e.next=5;break}return e.abrupt("return",_.a.fire("Error",t.msg,"error"));case 5:c((n=o._id,{type:S.NOTE_DELETE,payload:n})),c(P(s.currentTab)),c(D());case 8:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"popup__root",children:Object(O.jsxs)("div",{className:"popup",role:"dialog",children:[Object(O.jsx)("h4",{className:"popup__text",children:"Delete note?"}),Object(O.jsxs)("div",{className:"popup__footer",children:[Object(O.jsx)("button",{className:"btn btn--text",onClick:function(){c(D()),t(!1)},children:"Cancel"}),Object(O.jsx)("button",{className:"btn btn--text",onClick:i,children:"Delete"})]})]})})};var de=function(e){var t=e._id,n=e.title,r=e.description,c=e.category,s=e.completed,o=e.updatedAt,i=Object(a.useContext)(B),u=i.uiState,b=i.uiDispatch,h=Object(a.useContext)(Y).notesDispatch,m=Object(a.useState)(!1),x=Object(j.a)(m,2),f=x[0],v=x[1],g=function(){var e=Object(d.a)(l.a.mark((function e(n){var a,r,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target,r=a.checked,e.next=4,p("notes/complete/"+t,{completed:r},"PUT");case 4:if((c=e.sent).success){e.next=7;break}return e.abrupt("return",_.a.fire("Error",c.msg,"error"));case 7:s=c.note,o=ie(s.updatedAt),h(I({_id:t,completed:r,updatedAt:o})),h(A());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"note note--".concat(c," ").concat(s?"note--completed":""),"data-_id":t,children:[Object(O.jsxs)("div",{className:"note__header",children:[Object(O.jsx)(ue,{onChange:g,completed:s,checked:s}),Object(O.jsx)("h2",{className:"note__title",children:n}),Object(O.jsx)("button",{className:"note__btn",title:"Edit Note",onClick:function(){h(D(t)),b(K(u.isModalOpen))},children:Object(O.jsx)(ce.a,{size:20,color:"currentColor"})}),Object(O.jsx)("button",{className:"note__btn",title:"Delete Note",onClick:function(){h(D(t)),v(!0)},children:Object(O.jsx)(se.a,{size:20,color:"currentColor"})})]}),Object(O.jsx)("p",{className:"note__description",children:r}),Object(O.jsx)("div",{className:"note__footer",children:Object(O.jsx)("span",{children:o})}),f&&Object(O.jsx)(le,{setPopupShowing:v})]})};var je=function(e){var t=e.notes;return Object(O.jsx)("div",{className:"notes__grid",children:Object(O.jsx)(f,{stretch:!0,children:t.map((function(e){return Object(O.jsx)(re,{xs:12,sm:6,children:Object(O.jsx)(de,Object(N.a)({},e))},e._id)}))})})};var be=function(e){var t=e.progress;return Object(O.jsx)("div",{className:"progress-bar",children:Object(O.jsx)("div",{className:"progress-bar__progress",style:{width:t+"%"}})})},pe={noNotes:"/notes-app/img/add-note-illustration.svg",noFilterNotes:"/notes-app/img/search-image.svg"};var Oe=function(e){var t=e.title,n=e.type,a=pe[n];return Object(O.jsxs)("div",{className:"notes__any",children:[Object(O.jsx)("h1",{className:"heading-1 text-center",children:t}),Object(O.jsx)("img",{src:a,alt:t,width:"259",className:"img-center"})]})};var he=function(e){var t=e.placeholder,n=e.type,a=e.value,r=e.name,c=e.setNote,s=e.autoFocus;return Object(O.jsx)("div",{className:"form__group",children:Object(O.jsx)("input",{type:n,className:"form__control",placeholder:t,"aria-label":t,autoFocus:s,tabIndex:"1",name:r,value:a,onChange:function(e){var t=e.target;return c((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(g.a)({},r,t.value))}))}})})};var me=function(e){var t=e.options,n=e.selectHeader,r=e.setNote,c=e.value,s=e.name,o=Object(a.useState)({value:c,text:n}),i=Object(j.a)(o,2),u=i[0],l=i[1],d=u.text,b=Object(a.useRef)(),p=function(){b.current.classList.toggle("open")};return Object(O.jsxs)("div",{className:"form__control select",ref:b,children:[Object(O.jsxs)("div",{className:"select__header",onClick:p,tabIndex:"2",onBlur:function(){b.current.classList.remove("open")},onKeyPress:function(e){"Enter"===e.key&&p()},children:[d,Object(O.jsx)("span",{className:"select__arrow",children:"\u25bc"})]}),Object(O.jsx)("ul",{className:"select__list hide",children:t.map((function(e){var t=e.text,n=e.value;return Object(O.jsx)("li",{"data-value":n,className:"select__item",onClick:function(){!function(e,t){b.current.classList.remove("open"),l({value:e,text:t}),r((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(g.a)({},s,e))}))}(n,t)},children:t},n)}))})]})};var xe=function(e){var t=e.placeholder,n=e.value,a=e.name,r=e.setNote;return Object(O.jsx)("div",{className:"form__group",children:Object(O.jsx)("textarea",{className:"form__control form__control--multiline",placeholder:t,"aria-label":t,tabIndex:"3",name:a,value:n,onChange:function(e){var t=e.target;return r((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(g.a)({},a,t.value))}))}})})},fe={title:"",category:"",description:""};var ve=function(){var e=Object(a.useContext)(B),t=e.uiState,n=e.uiDispatch,r=Object(a.useContext)(Y),c=r.notesState,s=r.notesDispatch,o=Object(a.useContext)(h).auth,i=c.activeNote,u=Object(a.useState)(i||fe),b=Object(j.a)(u,2),m=b[0],x=b[1],v=m.title,g=m.category,E=m.description,y=function(){n(K(t.isModalOpen)),i&&s(D())},T=function(){var e=Object(d.a)(l.a.mark((function e(n){var a,r,c,u,d,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),v.trim()&&E.trim()&&g.trim()){e.next=3;break}return e.abrupt("return");case 3:if(!i){e.next=17;break}return e.next=6,p("notes/"+i._id,{title:v,description:E,category:g},"PUT");case 6:if((a=e.sent).success){e.next=9;break}return e.abrupt("return",_.a.fire("Error",a.msg,"error"));case 9:return r=a.note,c=ie(r.updatedAt),s(C(Object(N.a)(Object(N.a)({},i),{},{title:r.title,category:r.category,description:r.description,updatedAt:c}))),s(P(t.currentTab)),x(fe),s(D(null)),y(),e.abrupt("return");case 17:return e.next=19,p("notes",{title:v,description:E,category:g,user:o.uid},"POST");case 19:if((u=e.sent).success){e.next=22;break}return e.abrupt("return",_.a.fire("Error",u.msg,"error"));case 22:d=u.note,j=ie(d.updatedAt),s(k({_id:d._id,title:d.title,category:d.category,description:d.description,completed:d.completed,updatedAt:j})),s(P(t.currentTab)),x(fe),s(D(null)),y();case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{onSubmit:T,autoComplete:"off",children:[Object(O.jsxs)(f,{children:[Object(O.jsx)(re,{xs:12,sm:6,lg:8,children:Object(O.jsx)(he,{name:"title",value:v,setNote:x,type:"text",placeholder:"Add title...",autoFocus:!0})}),Object(O.jsx)(re,{xs:12,sm:6,lg:4,children:Object(O.jsx)(me,{selectHeader:g||"Select Category",options:[{text:"Home",value:"home"},{text:"Work",value:"work"},{text:"Personal",value:"personal"}],name:"category",value:g,setNote:x})}),Object(O.jsx)(re,{xs:12,lg:8,children:Object(O.jsx)(xe,{placeholder:"Add description...",name:"description",value:E,setNote:x})})]}),Object(O.jsxs)("div",{className:"modal__footer",children:[Object(O.jsx)("button",{type:"button",className:"btn btn--text",onClick:y,children:"Cancel"}),Object(O.jsx)("button",{className:"btn btn--text",children:i?"Update":"Add"})]})]})};var _e=function(){var e=Object(a.useContext)(B),t=e.uiState.isModalOpen,n=e.uiDispatch,r=Object(a.useContext)(Y),c=r.notesState,s=r.notesDispatch,o=c.notes,i=c.displayedNotes,u=c.completedNotes,j=o.length,b=j>0,h=i.length>0;return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("notes");case 2:if((t=e.sent).success){e.next=6;break}return alert(t.msg),e.abrupt("return");case 6:s(w(t.notes.map((function(e){var t=e._id,n=e.completed,a=e.title,r=e.description,c=e.category,s=e.updatedAt,o=e.user;return{_id:t,completed:n,title:a,description:r,category:c,updatedAt:ie(s),user:o}})))),a=localStorage.getItem("lastTab")||"all",n(Q(a));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s,n]),Object(O.jsx)("main",{className:"notes",children:Object(O.jsxs)(H,{children:[!b&&Object(O.jsx)(Oe,{title:"You don't have any notes",type:"noNotes"}),!h&&b?Object(O.jsx)(Oe,{title:"Couldn't find any notes",type:"noFilterNotes"}):null,h&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"heading-1 heading-1--notes",children:u===j?"You have completed all notes":"You have ".concat(u,"/").concat(j," ").concat(j>1?"notes ":"note "," completed")}),Object(O.jsx)(be,{progress:u/j*100}),Object(O.jsx)(je,{notes:i})]}),Object(O.jsxs)(ae,{open:t,confirmBtn:!0,cancelBtn:!0,confirmBtnText:"Add",children:[Object(O.jsx)("h2",{className:"heading-2 mt-0",children:"Add Note"}),Object(O.jsx)(ve,{})]})]})})};var ge=function(){return Object(O.jsxs)(q,{children:[Object(O.jsx)(X,{}),Object(O.jsx)(ne,{}),Object(O.jsx)(_e,{})]})};var Ne=function(){return Object(O.jsx)("div",{className:"spinner"})};var Ee=function(){var e=Object(a.useContext)(h),t=e.verifyToken,n=e.auth;return Object(a.useEffect)((function(){t()}),[t]),n.checking?Object(O.jsx)("div",{className:"overlay",children:Object(O.jsx)(Ne,{})}):Object(O.jsx)(o.a,{basename:"/notes-app",children:Object(O.jsx)("div",{children:Object(O.jsx)(i.d,{children:n.logged?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(i.b,{path:"/",exact:!0,children:Object(O.jsx)(ge,{})}),Object(O.jsx)(i.a,{to:"/"})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(i.b,{path:"/signin",exact:!0,children:Object(O.jsx)(y,{})}),Object(O.jsx)(i.b,{path:"/signup",exact:!0,children:Object(O.jsx)(T,{})}),Object(O.jsx)(i.a,{to:"/signin"})]})})})})};var ye=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(x,{children:Object(O.jsx)(z,{children:Object(O.jsx)(Ee,{})})})})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(ye,{})}),document.getElementById("root")),Te()}},[[40,1,2]]]);
//# sourceMappingURL=main.ab84f51f.chunk.js.map